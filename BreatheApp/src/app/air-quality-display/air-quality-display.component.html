<!-- src/app/air-quality-display/air-quality-display.component.html -->
<div class="container py-5">
  <div class="mb-4">
    <a class="btn btn-outline-primary btn-sm" (click)="retourRecherche()">
      <i class="bi bi-arrow-left"></i> Retour à la recherche
    </a>
  </div>
  
  <h1 class="mb-4">{{ city }}<span *ngIf="country">, {{ country }}</span></h1>
  
  @if (isLoading) {
    <div class="d-flex justify-content-center my-5">
      <div class="spinner-border text-primary" role="status">
        <span class="visually-hidden">Chargement des données...</span>
      </div>
    </div>
  }
  
  @if (error) {
    <div class="alert alert-danger">
      {{ error }}
    </div>
  }
  
  @if (!isLoading && !error) {
    <div class="row">
      <!-- Carte météo -->
      @if (weather) {
        <div class="col-md-6 mb-4">
          <div class="card shadow-sm h-100">
            <div class="card-header bg-primary text-white">
              <h5 class="m-0">Météo actuelle</h5>
            </div>
            <div class="card-body">
              <div class="d-flex align-items-center mb-3">
                <img 
                  *ngIf="weather.weather && weather.weather[0]"
                  src="https://openweathermap.org/img/wn/{{ weather.weather[0].icon }}@2x.png" 
                  alt="{{ weather.weather[0].description }}"
                  class="me-3"
                />
                <div>
                  <h2 class="mb-0">{{ weather.main.temp.toFixed(1) }}°C</h2>
                  <p class="text-capitalize">{{ weather.weather[0].description }}</p>
                </div>
              </div>
              
              <div class="row weather-details">
                <div class="col-6 mb-3">
                  <div class="detail-item">
                    <span class="detail-label">Ressenti</span>
                    <span class="detail-value">{{ weather.main.feels_like.toFixed(1) }}°C</span>
                  </div>
                </div>
                <div class="col-6 mb-3">
                  <div class="detail-item">
                    <span class="detail-label">Humidité</span>
                    <span class="detail-value">{{ weather.main.humidity }}%</span>
                  </div>
                </div>
                <div class="col-6 mb-3">
                  <div class="detail-item">
                    <span class="detail-label">Vent</span>
                    <span class="detail-value">{{ (weather.wind.speed * 3.6).toFixed(1) }} km/h</span>
                  </div>
                </div>
                <div class="col-6 mb-3">
                  <div class="detail-item">
                    <span class="detail-label">Pression</span>
                    <span class="detail-value">{{ weather.main.pressure }} hPa</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      }
      
      <!-- Carte qualité de l'air -->
      @if (airQuality) {
        <div class="col-md-6 mb-4">
          <div class="card shadow-sm h-100">
            <div class="card-header bg-primary text-white">
              <h5 class="m-0">Qualité de l'air</h5>
            </div>
            <div class="card-body">
              <div class="text-center mb-4">
                <div class="aqi-badge bg-{{ getAqiColor(airQuality.main.aqi) }}">
                  {{ airQuality.main.aqi }}
                </div>
                <h3 class="mt-2">{{ getAqiLabel(airQuality.main.aqi) }}</h3>
                <p class="text-muted">Indice de qualité de l'air</p>
              </div>
              
              <h6 class="mb-3">Polluants (µg/m³)</h6>
              <div class="row">
                <div class="col-6 mb-2">
                  <div class="detail-item">
                    <span class="detail-label">PM2.5</span>
                    <span class="detail-value">{{ airQuality.components.pm2_5.toFixed(1) }}</span>
                  </div>
                </div>
                <div class="col-6 mb-2">
                  <div class="detail-item">
                    <span class="detail-label">PM10</span>
                    <span class="detail-value">{{ airQuality.components.pm10.toFixed(1) }}</span>
                  </div>
                </div>
                <div class="col-6 mb-2">
                  <div class="detail-item">
                    <span class="detail-label">NO₂</span>
                    <span class="detail-value">{{ airQuality.components.no2.toFixed(1) }}</span>
                  </div>
                </div>
                <div class="col-6 mb-2">
                  <div class="detail-item">
                    <span class="detail-label">O₃</span>
                    <span class="detail-value">{{ airQuality.components.o3.toFixed(1) }}</span>
                  </div>
                </div>
                <div class="col-6 mb-2">
                  <div class="detail-item">
                    <span class="detail-label">SO₂</span>
                    <span class="detail-value">{{ airQuality.components.so2.toFixed(1) }}</span>
                  </div>
                </div>
                <div class="col-6 mb-2">
                  <div class="detail-item">
                    <span class="detail-label">CO</span>
                    <span class="detail-value">{{ airQuality.components.co.toFixed(1) }}</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      }
    </div>
  }
</div>